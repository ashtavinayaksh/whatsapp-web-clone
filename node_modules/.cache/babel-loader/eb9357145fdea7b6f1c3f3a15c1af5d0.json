{"ast":null,"code":"var _jsxFileName = \"E:\\\\React_Project\\\\WhatsApp-Clone-React-isnotuploaded on github\\\\src\\\\Chat\\\\DrawerBottom.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useStateValue } from \"../StateProvider\";\nimport ReactPlayer from \"react-player\"; //importing material-ui\n\nimport Fab from \"@material-ui/core/Fab\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport { makeStyles } from \"@material-ui/core/styles\"; //importing material-ui-icons\n\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport SendIcon from \"@material-ui/icons/Send\"; //importing styles\n\nimport \"./DrawerBottom.css\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  drawerPaper: {\n    position: \"absolute\",\n    width: \"100%\" // height: '90vh',\n    // [theme.breakpoints.up(\"xs\")]: {\n    //   width: \"100vw\",\n    // },\n    // [theme.breakpoints.up(\"sm\")]: {\n    //   width: \"70vw\",\n    // },\n    // [theme.breakpoints.up(\"md\")]: {\n    //   width: \"70vw\",\n    // },\n    // [theme.breakpoints.up(\"lg\")]: {\n    //   width: \"70vw\",\n    // },\n\n  },\n  paperAnchorBottom: {\n    left: \"auto\",\n    right: 0,\n    bottom: 0,\n    maxHeight: \"100%\",\n    [theme.breakpoints.up(\"xs\")]: {\n      top: 52\n    },\n    [theme.breakpoints.up(\"sm\")]: {\n      top: 65\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      top: 65\n    },\n    [theme.breakpoints.up(\"lg\")]: {\n      top: 65\n    }\n  }\n}));\n\nfunction DrawerBottom({\n  drawerBottom,\n  setDrawerBottom,\n  fileImageUrl,\n  fileVideoUrl,\n  setFileVideoUrl,\n  setFileImageUrl,\n  firebase,\n  db,\n  storage\n}) {\n  _s();\n\n  const classes = useStyles();\n  const [{\n    user\n  }] = useStateValue();\n  const [caption, setCaption] = useState(\"\");\n  const {\n    roomId\n  } = useParams();\n\n  const handleUpload = e => {\n    e.preventDefault();\n\n    if (fileImageUrl) {\n      db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({\n        photo: fileImageUrl,\n        name: user.displayName,\n        uid: user.uid,\n        caption: caption,\n        timestamp: firebase.firestore.FieldValue.serverTimestamp()\n      }).then(function (docRef) {\n        // console.log(\"Document written with ID: \", docRef.id);\n        db.collection(\"rooms\").doc(roomId).collection(\"messages\").doc(docRef.id).set({\n          id: docRef.id\n        }, {\n          merge: true\n        });\n      }).catch(function (error) {\n        console.error(\"Error adding document: \", error);\n      });\n      setFileImageUrl(null);\n    }\n\n    if (fileVideoUrl) {\n      db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({\n        video: fileVideoUrl,\n        name: user.displayName,\n        uid: user.uid,\n        caption: caption,\n        timestamp: firebase.firestore.FieldValue.serverTimestamp()\n      }).then(function (docRef) {\n        // console.log(\"Document written with ID: \", docRef.id);\n        db.collection(\"rooms\").doc(roomId).collection(\"messages\").doc(docRef.id).set({\n          id: docRef.id\n        }, {\n          merge: true\n        });\n      }).catch(function (error) {\n        console.error(\"Error adding document: \", error);\n      });\n      setFileVideoUrl(null);\n    }\n\n    setCaption(\"\");\n    setDrawerBottom(false);\n  };\n\n  const handleDrawerClose = () => {\n    setDrawerBottom(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Drawer, {\n    variant: \"persistent\",\n    anchor: \"bottom\",\n    open: drawerBottom,\n    classes: {\n      paper: classes.drawerPaper,\n      paperAnchorBottom: classes.paperAnchorBottom\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawerBottom__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawerBottom__header_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleDrawerClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CloseIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, \"Preview\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawerBottom__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawerBottom__content_photo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, fileImageUrl ? /*#__PURE__*/React.createElement(\"img\", {\n    src: fileImageUrl,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawerBottom__content_video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"player-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ReactPlayer, {\n    className: \"react-player\",\n    width: \"100%\",\n    height: \"50%\",\n    url: fileVideoUrl,\n    controls: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawerBottom__content_caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Add a caption...\",\n    value: caption,\n    onChange: e => setCaption(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"send\",\n    size: \"large\",\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawerBottom__footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, fileImageUrl ? /*#__PURE__*/React.createElement(\"img\", {\n    src: fileImageUrl,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 32\n    }\n  }) : null))));\n}\n\n_s(DrawerBottom, \"SEsG72yKDXCN9k+LA4zr8wxN1dM=\", false, function () {\n  return [useStyles, useStateValue, useParams];\n});\n\n_c = DrawerBottom;\nexport default DrawerBottom;\n\nvar _c;\n\n$RefreshReg$(_c, \"DrawerBottom\");","map":{"version":3,"sources":["E:/React_Project/WhatsApp-Clone-React-isnotuploaded on github/src/Chat/DrawerBottom.js"],"names":["React","useState","useParams","useStateValue","ReactPlayer","Fab","IconButton","Drawer","makeStyles","CloseIcon","SendIcon","useStyles","theme","root","display","drawerPaper","position","width","paperAnchorBottom","left","right","bottom","maxHeight","breakpoints","up","top","DrawerBottom","drawerBottom","setDrawerBottom","fileImageUrl","fileVideoUrl","setFileVideoUrl","setFileImageUrl","firebase","db","storage","classes","user","caption","setCaption","roomId","handleUpload","e","preventDefault","collection","doc","add","photo","name","displayName","uid","timestamp","firestore","FieldValue","serverTimestamp","then","docRef","id","set","merge","catch","error","console","video","handleDrawerClose","paper","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport ReactPlayer from \"react-player\";\r\n//importing material-ui\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n//importing styles\r\nimport \"./DrawerBottom.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"absolute\",\r\n    width: \"100%\",\r\n    // height: '90vh',\r\n    // [theme.breakpoints.up(\"xs\")]: {\r\n    //   width: \"100vw\",\r\n    // },\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: \"70vw\",\r\n    // },\r\n    // [theme.breakpoints.up(\"md\")]: {\r\n    //   width: \"70vw\",\r\n    // },\r\n    // [theme.breakpoints.up(\"lg\")]: {\r\n    //   width: \"70vw\",\r\n    // },\r\n  },\r\n  paperAnchorBottom: {\r\n    left: \"auto\",\r\n    right: 0,\r\n    bottom: 0,\r\n    maxHeight: \"100%\",\r\n    [theme.breakpoints.up(\"xs\")]: {\r\n      top: 52,\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      top: 65,\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      top: 65,\r\n    },\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      top: 65,\r\n    },\r\n  },\r\n}));\r\n\r\nfunction DrawerBottom({\r\n  drawerBottom,\r\n  setDrawerBottom,\r\n  fileImageUrl,\r\n  fileVideoUrl,\r\n  setFileVideoUrl,\r\n  setFileImageUrl,\r\n  firebase,\r\n  db,\r\n  storage,\r\n}) {\r\n  const classes = useStyles();\r\n  const [{ user }] = useStateValue();\r\n  const [caption, setCaption] = useState(\"\");\r\n  const { roomId } = useParams();\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n    if (fileImageUrl) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          photo: fileImageUrl,\r\n          name: user.displayName,\r\n          uid: user.uid,\r\n          caption: caption,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          // console.log(\"Document written with ID: \", docRef.id);\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .doc(docRef.id)\r\n            .set(\r\n              {\r\n                id: docRef.id,\r\n              },\r\n              { merge: true }\r\n            );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n      setFileImageUrl(null);\r\n    }\r\n    if (fileVideoUrl) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          video: fileVideoUrl,\r\n          name: user.displayName,\r\n          uid: user.uid,\r\n          caption: caption,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          // console.log(\"Document written with ID: \", docRef.id);\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .doc(docRef.id)\r\n            .set(\r\n              {\r\n                id: docRef.id,\r\n              },\r\n              { merge: true }\r\n            );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n      setFileVideoUrl(null);\r\n    }\r\n    setCaption(\"\");\r\n    setDrawerBottom(false);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerBottom(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        variant=\"persistent\"\r\n        anchor=\"bottom\"\r\n        open={drawerBottom}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n          paperAnchorBottom: classes.paperAnchorBottom,\r\n        }}\r\n      >\r\n        <div className=\"drawerBottom__header\">\r\n          <div className=\"drawerBottom__header_container\">\r\n            <IconButton onClick={handleDrawerClose}>\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <p>Preview</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerBottom__content\">\r\n          <div className=\"drawerBottom__content_photo\">\r\n            {fileImageUrl ? (\r\n              <img src={fileImageUrl} alt=\"\" />\r\n            ) : (\r\n              <div className=\"drawerBottom__content_video\">\r\n                <div className=\"player-wrapper\">\r\n                  <ReactPlayer\r\n                    className=\"react-player\"\r\n                    width=\"100%\"\r\n                    height=\"50%\"\r\n                    url={fileVideoUrl}\r\n                    controls={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"drawerBottom__content_caption\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Add a caption...\"\r\n              value={caption}\r\n              onChange={(e) => setCaption(e.target.value)}\r\n            />\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"send\"\r\n              size=\"large\"\r\n              onClick={handleUpload}\r\n            >\r\n              <div className=\"chat__icon\">\r\n                <SendIcon />\r\n              </div>\r\n            </Fab>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerBottom__footer\">\r\n          <div>{fileImageUrl ? <img src={fileImageUrl} alt=\"\" /> : null}</div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerBottom;\r\n"]},"metadata":{},"sourceType":"module"}