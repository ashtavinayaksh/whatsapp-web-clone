{"ast":null,"code":"var _jsxFileName = \"E:\\\\React_Project\\\\WhatsApp-Clone-React-isnotuploaded on github\\\\src\\\\Chat\\\\ChatFooter.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useStateValue } from \"../StateProvider\";\nimport { toastInfo } from \"../shared/toastInfo\"; //importing components\n\nimport DrawerBottom from \"./DrawerBottom\";\nimport TooltipCustom from \"../shared/TooltipCustom\";\nimport { Picker } from \"emoji-mart\"; //importing material-ui\n\nimport Hidden from \"@material-ui/core/Hidden\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Fab from \"@material-ui/core/Fab\";\nimport Slide from \"@material-ui/core/Slide\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport TextField from \"@material-ui/core/TextField\"; //importing material-ui-icons\n\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport InsertEmoticonIcon from \"@material-ui/icons/InsertEmoticon\";\nimport MicIcon from \"@material-ui/icons/Mic\";\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\nimport PhotoIcon from \"@material-ui/icons/Photo\";\nimport CameraAltIcon from \"@material-ui/icons/CameraAlt\";\nimport VideoCallIcon from \"@material-ui/icons/VideoCall\";\nimport PersonIcon from \"@material-ui/icons/Person\"; //importing styles\n\nimport \"emoji-mart/css/emoji-mart.css\";\nimport \"./ChatFooter.css\";\nconst attachFileLists = [{\n  title: \"Room\",\n  icon: /*#__PURE__*/React.createElement(VideoCallIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 11\n    }\n  }),\n  id: Math.random() * 100000\n}, {\n  title: \"Contact\",\n  icon: /*#__PURE__*/React.createElement(PersonIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }),\n  id: Math.random() * 100000\n}, {\n  title: \"Document\",\n  icon: /*#__PURE__*/React.createElement(InsertDriveFileIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }),\n  id: Math.random() * 100000\n}, {\n  title: \"Camera\",\n  icon: /*#__PURE__*/React.createElement(CameraAltIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }),\n  id: Math.random() * 100000\n}, {\n  title: \"Photos & Videos\",\n  icon: /*#__PURE__*/React.createElement(PhotoIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }),\n  id: Math.random() * 100000\n}];\n\nfunction ChatFooter({\n  roomName,\n  roomId,\n  db,\n  firebase,\n  storage\n}) {\n  _s();\n\n  const [{\n    user\n  }] = useStateValue();\n  const [input, setInput] = useState(\"\");\n  const [emoji, setEmoji] = useState(false);\n  const [fileImageUrl, setFileImageUrl] = useState(null);\n  const [fileVideoUrl, setFileVideoUrl] = useState(null);\n  const [drawerBottom, setDrawerBottom] = useState(false);\n  const [showAttachFile, setShowAttachFile] = useState(false); // const sendMessage = (e) => {\n  //   e.preventDefault();\n  //   const youtubeLink = /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$/;\n  //   const facebookVideoLink = /^https?:\\/\\/www\\.facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\n  //   const vimeoLink = /(http|https)?:\\/\\/(www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|video\\/|)(\\d+)(?:|\\/\\?)/;\n  //   const soundcloudLink = /^https?:\\/\\/(soundcloud\\.com|snd\\.sc)\\/(.*)$/;\n  //   const dailymotionLink = /^.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\n  //   const urlLink = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/;\n  //   if (roomId) {\n  //     if (\n  //       youtubeLink.test(input) ||\n  //       facebookVideoLink.test(input) ||\n  //       vimeoLink.test(input) ||\n  //       soundcloudLink.test(input) ||\n  //       dailymotionLink.test(input)\n  //     ) {\n  //       db.collection(\"rooms\")\n  //         .doc(roomId)\n  //         .collection(\"messages\")\n  //         .add({\n  //           message: \"\",\n  //           video: input,\n  //           name: user.displayName,\n  //           uid: user.uid,\n  //           timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n  //         })\n  //         .then(function (docRef) {\n  //           console.log(\"Document written with ID: \", docRef.id);\n  //           db.collection(\"rooms\")\n  //             .doc(roomId)\n  //             .collection(\"messages\")\n  //             .doc(docRef.id)\n  //             .set(\n  //               {\n  //                 id: docRef.id,\n  //               },\n  //               { merge: true }\n  //             );\n  //         })\n  //         .catch(function (error) {\n  //           console.error(\"Error adding document: \", error);\n  //         });\n  //     } else if (urlLink.test(input)) {\n  //       db.collection(\"rooms\")\n  //         .doc(roomId)\n  //         .collection(\"messages\")\n  //         .add({\n  //           message: \"\",\n  //           url: input,\n  //           name: user.displayName,\n  //           uid: user.uid,\n  //           timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n  //         })\n  //         .then(function (docRef) {\n  //           console.log(\"Document written with ID: \", docRef.id);\n  //           db.collection(\"rooms\")\n  //             .doc(roomId)\n  //             .collection(\"messages\")\n  //             .doc(docRef.id)\n  //             .set(\n  //               {\n  //                 id: docRef.id,\n  //               },\n  //               { merge: true }\n  //             );\n  //         })\n  //         .catch(function (error) {\n  //           console.error(\"Error adding document: \", error);\n  //         });\n  //     } else if (/\\S/.test(input)) {\n  //       db.collection(\"rooms\")\n  //         .doc(roomId)\n  //         .collection(\"messages\")\n  //         .add({\n  //           message: input,\n  //           name: user.displayName,\n  //           uid: user.uid,\n  //           timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n  //         })\n  //         .then(function (docRef) {\n  //           // console.log(\"Document written with ID: \", docRef.id);\n  //           db.collection(\"rooms\")\n  //             .doc(roomId)\n  //             .collection(\"messages\")\n  //             .doc(docRef.id)\n  //             .set(\n  //               {\n  //                 id: docRef.id,\n  //               },\n  //               { merge: true }\n  //             );\n  //         })\n  //         .catch(function (error) {\n  //           console.error(\"Error adding document: \", error);\n  //         });\n  //     }\n  //   }\n  //   setInput(\"\");\n  //   setEmoji(false);\n  // };\n\n  const attachFile = () => {\n    const attachToastId = \"attach\";\n    toastInfo(\"All icons have the same functions, you can only upload images, gifs and videos!\", attachToastId, \"top-center\");\n\n    if (showAttachFile === false) {\n      setShowAttachFile(true);\n    } else {\n      setShowAttachFile(false);\n    } // console.log(\"attachFile click\", attachToastId);\n\n  };\n\n  const addEmoji = e => {\n    let emoji = e.native;\n    setInput(input + emoji);\n  };\n\n  const handleEmoticons = () => {\n    setEmoji(true);\n  };\n\n  const handleEmoticonsClose = () => {\n    setEmoji(false);\n  };\n\n  const voiceMessage = () => {\n    const voiceMessageToastId = \"voiceMessage\";\n    toastInfo(\"Voice Message is not yet available!\", voiceMessageToastId, \"top-center\");\n  };\n\n  const onFileChange = async e => {\n    const fileSizeToastId = \"fileSizeToastId\";\n    const file = e.target.files[0];\n\n    if (file.size > 12 * 1024 * 1024) {\n      toastInfo(\"File should not exceed more than 12MB\", fileSizeToastId, \"top-center\");\n    } else {\n      const storageRef = storage.ref();\n\n      if (file.type.match(\"image.*\")) {\n        const imagesRef = storageRef.child(`rooms/${roomName}/images/`);\n        const fileRef = imagesRef.child(new Date().getTime() + \" \" + file.name);\n        await fileRef.put(file);\n        setFileImageUrl(await fileRef.getDownloadURL());\n        console.log(\"uploading image\", fileImageUrl);\n      } else if (file.type.match(\"video.*\")) {\n        const videosRef = storageRef.child(`rooms/${roomName}/videos`);\n        const fileRef = videosRef.child(new Date().getTime() + \" \" + file.name);\n        await fileRef.put(file);\n        setFileVideoUrl(await fileRef.getDownloadURL());\n        console.log(\"uploading video\", fileVideoUrl);\n      }\n\n      setDrawerBottom(true);\n    }\n  };\n\n  const handleClickAway = () => {\n    setShowAttachFile(false);\n  };\n\n  const onEnterPress = e => {\n    if (e.keyCode == 13 && e.shiftKey == false) {\n      e.preventDefault();\n      const youtubeLink = /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$/;\n      const facebookVideoLink = /^https?:\\/\\/www\\.facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\n      const vimeoLink = /(http|https)?:\\/\\/(www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|video\\/|)(\\d+)(?:|\\/\\?)/;\n      const soundcloudLink = /^https?:\\/\\/(soundcloud\\.com|snd\\.sc)\\/(.*)$/;\n      const dailymotionLink = /^.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\n      const urlLink = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/;\n\n      if (roomId) {\n        if (youtubeLink.test(input) || facebookVideoLink.test(input) || vimeoLink.test(input) || soundcloudLink.test(input) || dailymotionLink.test(input)) {\n          db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({\n            message: \"\",\n            video: input,\n            name: user.displayName,\n            uid: user.uid,\n            timestamp: firebase.firestore.FieldValue.serverTimestamp()\n          }).then(function (docRef) {\n            console.log(\"Document written with ID: \", docRef.id);\n            db.collection(\"rooms\").doc(roomId).collection(\"messages\").doc(docRef.id).set({\n              id: docRef.id\n            }, {\n              merge: true\n            });\n          }).catch(function (error) {\n            console.error(\"Error adding document: \", error);\n          });\n        } else if (urlLink.test(input)) {\n          db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({\n            message: \"\",\n            url: input,\n            name: user.displayName,\n            uid: user.uid,\n            timestamp: firebase.firestore.FieldValue.serverTimestamp()\n          }).then(function (docRef) {\n            console.log(\"Document written with ID: \", docRef.id);\n            db.collection(\"rooms\").doc(roomId).collection(\"messages\").doc(docRef.id).set({\n              id: docRef.id\n            }, {\n              merge: true\n            });\n          }).catch(function (error) {\n            console.error(\"Error adding document: \", error);\n          });\n        } else if (/\\S/.test(input)) {\n          db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({\n            message: input,\n            name: user.displayName,\n            uid: user.uid,\n            timestamp: firebase.firestore.FieldValue.serverTimestamp()\n          }).then(function (docRef) {\n            // console.log(\"Document written with ID: \", docRef.id);\n            db.collection(\"rooms\").doc(roomId).collection(\"messages\").doc(docRef.id).set({\n              id: docRef.id\n            }, {\n              merge: true\n            });\n          }).catch(function (error) {\n            console.error(\"Error adding document: \", error);\n          });\n        }\n      }\n\n      setInput(\"\");\n      setEmoji(false);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DrawerBottom, {\n    drawerBottom: drawerBottom,\n    setDrawerBottom: setDrawerBottom,\n    fileVideoUrl: fileVideoUrl,\n    fileImageUrl: fileImageUrl,\n    setFileImageUrl: setFileImageUrl,\n    setFileVideoUrl: setFileVideoUrl,\n    roomId: roomId,\n    db: db,\n    firebase: firebase,\n    storage: storage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }\n  }), emoji ? /*#__PURE__*/React.createElement(Hidden, {\n    only: [\"xs\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TooltipCustom, {\n    name: \"Close\",\n    icon: /*#__PURE__*/React.createElement(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 19\n      }\n    }),\n    onClick: () => handleEmoticonsClose(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 11\n    }\n  })) : null, /*#__PURE__*/React.createElement(TooltipCustom, {\n    name: \"Emoticons\",\n    icon: /*#__PURE__*/React.createElement(InsertEmoticonIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 15\n      }\n    }),\n    onClick: () => handleEmoticons(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }\n  }), emoji ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Hidden, {\n    only: [\"xs\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Picker, {\n    onSelect: addEmoji,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Hidden, {\n    smUp: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ClickAwayListener, {\n    onClickAway: handleEmoticonsClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Picker, {\n    onSelect: addEmoji,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 15\n    }\n  })))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TooltipCustom, {\n    name: \"Attach\",\n    icon: /*#__PURE__*/React.createElement(AttachFileIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 17\n      }\n    }),\n    onClick: attachFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 9\n    }\n  }), showAttachFile ? /*#__PURE__*/React.createElement(ClickAwayListener, {\n    onClickAway: handleClickAway,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__attachFile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 13\n    }\n  }, attachFileLists.map(attachFileList => /*#__PURE__*/React.createElement(Slide, {\n    key: attachFileList.id,\n    direction: \"up\",\n    in: attachFile,\n    mountOnEnter: true,\n    unmountOnExit: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontSize: \"14px\",\n        padding: \"8px 5px 8px 5px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 23\n      }\n    }, attachFileList.title),\n    placement: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"person\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"file-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 25\n    }\n  }, attachFileList.icon), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"file-input\",\n    type: \"file\",\n    onChange: onFileChange,\n    accept: \"image/*,video/mp4,video/3gpp,video/quicktime\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 25\n    }\n  })))))))) : null), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    required: true,\n    value: input,\n    onChange: e => setInput(e.target.value),\n    placeholder: \"Type a message\",\n    type: \"text\",\n    rows: \"1\",\n    onKeyDown: onEnterPress // cols=\"50\"\n    // minLength=\"1\"\n    // maxLength=\"700\"\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(TooltipCustom, {\n    name: \"Voice Message\",\n    icon: /*#__PURE__*/React.createElement(MicIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 15\n      }\n    }),\n    onClick: () => voiceMessage(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(ChatFooter, \"KLNO35/xcvzae76XkEYENS7BZwo=\", false, function () {\n  return [useStateValue];\n});\n\n_c = ChatFooter;\nexport default ChatFooter;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatFooter\");","map":{"version":3,"sources":["E:/React_Project/WhatsApp-Clone-React-isnotuploaded on github/src/Chat/ChatFooter.js"],"names":["React","useState","useStateValue","toastInfo","DrawerBottom","TooltipCustom","Picker","Hidden","Tooltip","Fab","Slide","ClickAwayListener","TextField","CloseIcon","InsertEmoticonIcon","MicIcon","AttachFileIcon","InsertDriveFileIcon","PhotoIcon","CameraAltIcon","VideoCallIcon","PersonIcon","attachFileLists","title","icon","id","Math","random","ChatFooter","roomName","roomId","db","firebase","storage","user","input","setInput","emoji","setEmoji","fileImageUrl","setFileImageUrl","fileVideoUrl","setFileVideoUrl","drawerBottom","setDrawerBottom","showAttachFile","setShowAttachFile","attachFile","attachToastId","addEmoji","e","native","handleEmoticons","handleEmoticonsClose","voiceMessage","voiceMessageToastId","onFileChange","fileSizeToastId","file","target","files","size","storageRef","ref","type","match","imagesRef","child","fileRef","Date","getTime","name","put","getDownloadURL","console","log","videosRef","handleClickAway","onEnterPress","keyCode","shiftKey","preventDefault","youtubeLink","facebookVideoLink","vimeoLink","soundcloudLink","dailymotionLink","urlLink","test","collection","doc","add","message","video","displayName","uid","timestamp","firestore","FieldValue","serverTimestamp","then","docRef","set","merge","catch","error","url","map","attachFileList","fontSize","padding","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\n//importing components\r\nimport DrawerBottom from \"./DrawerBottom\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport { Picker } from \"emoji-mart\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport InsertEmoticonIcon from \"@material-ui/icons/InsertEmoticon\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\r\nimport PhotoIcon from \"@material-ui/icons/Photo\";\r\nimport CameraAltIcon from \"@material-ui/icons/CameraAlt\";\r\nimport VideoCallIcon from \"@material-ui/icons/VideoCall\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\n//importing styles\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport \"./ChatFooter.css\";\r\n\r\nconst attachFileLists = [\r\n  {\r\n    title: \"Room\",\r\n    icon: <VideoCallIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Contact\",\r\n    icon: <PersonIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Document\",\r\n    icon: <InsertDriveFileIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Camera\",\r\n    icon: <CameraAltIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Photos & Videos\",\r\n    icon: <PhotoIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n];\r\n\r\nfunction ChatFooter({ roomName, roomId, db, firebase, storage }) {\r\n  const [{ user }] = useStateValue();\r\n  const [input, setInput] = useState(\"\");\r\n  const [emoji, setEmoji] = useState(false);\r\n  const [fileImageUrl, setFileImageUrl] = useState(null);\r\n  const [fileVideoUrl, setFileVideoUrl] = useState(null);\r\n  const [drawerBottom, setDrawerBottom] = useState(false);\r\n  const [showAttachFile, setShowAttachFile] = useState(false);\r\n\r\n  // const sendMessage = (e) => {\r\n  //   e.preventDefault();\r\n  //   const youtubeLink = /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$/;\r\n  //   const facebookVideoLink = /^https?:\\/\\/www\\.facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\r\n  //   const vimeoLink = /(http|https)?:\\/\\/(www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|video\\/|)(\\d+)(?:|\\/\\?)/;\r\n  //   const soundcloudLink = /^https?:\\/\\/(soundcloud\\.com|snd\\.sc)\\/(.*)$/;\r\n  //   const dailymotionLink = /^.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\r\n  //   const urlLink = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/;\r\n\r\n  //   if (roomId) {\r\n  //     if (\r\n  //       youtubeLink.test(input) ||\r\n  //       facebookVideoLink.test(input) ||\r\n  //       vimeoLink.test(input) ||\r\n  //       soundcloudLink.test(input) ||\r\n  //       dailymotionLink.test(input)\r\n  //     ) {\r\n  //       db.collection(\"rooms\")\r\n  //         .doc(roomId)\r\n  //         .collection(\"messages\")\r\n  //         .add({\r\n  //           message: \"\",\r\n  //           video: input,\r\n  //           name: user.displayName,\r\n  //           uid: user.uid,\r\n  //           timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n  //         })\r\n  //         .then(function (docRef) {\r\n  //           console.log(\"Document written with ID: \", docRef.id);\r\n  //           db.collection(\"rooms\")\r\n  //             .doc(roomId)\r\n  //             .collection(\"messages\")\r\n  //             .doc(docRef.id)\r\n  //             .set(\r\n  //               {\r\n  //                 id: docRef.id,\r\n  //               },\r\n  //               { merge: true }\r\n  //             );\r\n  //         })\r\n  //         .catch(function (error) {\r\n  //           console.error(\"Error adding document: \", error);\r\n  //         });\r\n  //     } else if (urlLink.test(input)) {\r\n  //       db.collection(\"rooms\")\r\n  //         .doc(roomId)\r\n  //         .collection(\"messages\")\r\n  //         .add({\r\n  //           message: \"\",\r\n  //           url: input,\r\n  //           name: user.displayName,\r\n  //           uid: user.uid,\r\n  //           timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n  //         })\r\n  //         .then(function (docRef) {\r\n  //           console.log(\"Document written with ID: \", docRef.id);\r\n  //           db.collection(\"rooms\")\r\n  //             .doc(roomId)\r\n  //             .collection(\"messages\")\r\n  //             .doc(docRef.id)\r\n  //             .set(\r\n  //               {\r\n  //                 id: docRef.id,\r\n  //               },\r\n  //               { merge: true }\r\n  //             );\r\n  //         })\r\n  //         .catch(function (error) {\r\n  //           console.error(\"Error adding document: \", error);\r\n  //         });\r\n  //     } else if (/\\S/.test(input)) {\r\n  //       db.collection(\"rooms\")\r\n  //         .doc(roomId)\r\n  //         .collection(\"messages\")\r\n  //         .add({\r\n  //           message: input,\r\n  //           name: user.displayName,\r\n  //           uid: user.uid,\r\n  //           timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n  //         })\r\n  //         .then(function (docRef) {\r\n  //           // console.log(\"Document written with ID: \", docRef.id);\r\n  //           db.collection(\"rooms\")\r\n  //             .doc(roomId)\r\n  //             .collection(\"messages\")\r\n  //             .doc(docRef.id)\r\n  //             .set(\r\n  //               {\r\n  //                 id: docRef.id,\r\n  //               },\r\n  //               { merge: true }\r\n  //             );\r\n  //         })\r\n  //         .catch(function (error) {\r\n  //           console.error(\"Error adding document: \", error);\r\n  //         });\r\n  //     }\r\n  //   }\r\n  //   setInput(\"\");\r\n  //   setEmoji(false);\r\n  // };\r\n\r\n  const attachFile = () => {\r\n    const attachToastId = \"attach\";\r\n    toastInfo(\r\n      \"All icons have the same functions, you can only upload images, gifs and videos!\",\r\n      attachToastId,\r\n      \"top-center\"\r\n    );\r\n    if (showAttachFile === false) {\r\n      setShowAttachFile(true);\r\n    } else {\r\n      setShowAttachFile(false);\r\n    }\r\n    // console.log(\"attachFile click\", attachToastId);\r\n  };\r\n\r\n  const addEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInput(input + emoji);\r\n  };\r\n\r\n  const handleEmoticons = () => {\r\n    setEmoji(true);\r\n  };\r\n\r\n  const handleEmoticonsClose = () => {\r\n    setEmoji(false);\r\n  };\r\n\r\n  const voiceMessage = () => {\r\n    const voiceMessageToastId = \"voiceMessage\";\r\n    toastInfo(\r\n      \"Voice Message is not yet available!\",\r\n      voiceMessageToastId,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const onFileChange = async (e) => {\r\n    const fileSizeToastId = \"fileSizeToastId\";\r\n    const file = e.target.files[0];\r\n    if (file.size > 12 * 1024 * 1024) {\r\n      toastInfo(\r\n        \"File should not exceed more than 12MB\",\r\n        fileSizeToastId,\r\n        \"top-center\"\r\n      );\r\n    } else {\r\n      const storageRef = storage.ref();\r\n      if (file.type.match(\"image.*\")) {\r\n        const imagesRef = storageRef.child(`rooms/${roomName}/images/`);\r\n        const fileRef = imagesRef.child(new Date().getTime() + \" \" + file.name);\r\n        await fileRef.put(file);\r\n        setFileImageUrl(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", fileImageUrl);\r\n      } else if (file.type.match(\"video.*\")) {\r\n        const videosRef = storageRef.child(`rooms/${roomName}/videos`);\r\n        const fileRef = videosRef.child(new Date().getTime() + \" \" + file.name);\r\n        await fileRef.put(file);\r\n        setFileVideoUrl(await fileRef.getDownloadURL());\r\n        console.log(\"uploading video\", fileVideoUrl);\r\n      }\r\n      setDrawerBottom(true);\r\n    }\r\n  };\r\n\r\n  const handleClickAway = () => {\r\n    setShowAttachFile(false);\r\n  };\r\n\r\n  const onEnterPress = (e) => {\r\n    if (e.keyCode == 13 && e.shiftKey == false) {\r\n      e.preventDefault();\r\n\r\n      const youtubeLink = /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$/;\r\n      const facebookVideoLink = /^https?:\\/\\/www\\.facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\r\n      const vimeoLink = /(http|https)?:\\/\\/(www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|video\\/|)(\\d+)(?:|\\/\\?)/;\r\n      const soundcloudLink = /^https?:\\/\\/(soundcloud\\.com|snd\\.sc)\\/(.*)$/;\r\n      const dailymotionLink = /^.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\r\n      const urlLink = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/;\r\n\r\n      if (roomId) {\r\n        if (\r\n          youtubeLink.test(input) ||\r\n          facebookVideoLink.test(input) ||\r\n          vimeoLink.test(input) ||\r\n          soundcloudLink.test(input) ||\r\n          dailymotionLink.test(input)\r\n        ) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: \"\",\r\n              video: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        } else if (urlLink.test(input)) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: \"\",\r\n              url: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        } else if (/\\S/.test(input)) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              // console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        }\r\n      }\r\n      setInput(\"\");\r\n      setEmoji(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat__footer\">\r\n      <DrawerBottom\r\n        drawerBottom={drawerBottom}\r\n        setDrawerBottom={setDrawerBottom}\r\n        fileVideoUrl={fileVideoUrl}\r\n        fileImageUrl={fileImageUrl}\r\n        setFileImageUrl={setFileImageUrl}\r\n        setFileVideoUrl={setFileVideoUrl}\r\n        roomId={roomId}\r\n        db={db}\r\n        firebase={firebase}\r\n        storage={storage}\r\n      />\r\n\r\n      {emoji ? (\r\n        <Hidden only={[\"xs\"]}>\r\n          <TooltipCustom\r\n            name=\"Close\"\r\n            icon={<CloseIcon />}\r\n            onClick={() => handleEmoticonsClose()}\r\n          />\r\n        </Hidden>\r\n      ) : null}\r\n\r\n      <TooltipCustom\r\n        name=\"Emoticons\"\r\n        icon={<InsertEmoticonIcon />}\r\n        onClick={() => handleEmoticons()}\r\n      />\r\n\r\n      {emoji ? (\r\n        <>\r\n          <Hidden only={[\"xs\"]}>\r\n            <Picker onSelect={addEmoji} />\r\n          </Hidden>\r\n          <Hidden smUp>\r\n            <ClickAwayListener onClickAway={handleEmoticonsClose}>\r\n              <Picker onSelect={addEmoji} />\r\n            </ClickAwayListener>\r\n          </Hidden>\r\n        </>\r\n      ) : null}\r\n\r\n      <div>\r\n        <TooltipCustom\r\n          name=\"Attach\"\r\n          icon={<AttachFileIcon />}\r\n          onClick={attachFile}\r\n        />\r\n        {showAttachFile ? (\r\n          <ClickAwayListener onClickAway={handleClickAway}>\r\n            <div className=\"chat__attachFile\">\r\n              {attachFileLists.map((attachFileList) => (\r\n                <Slide\r\n                  key={attachFileList.id}\r\n                  direction=\"up\"\r\n                  in={attachFile}\r\n                  mountOnEnter\r\n                  unmountOnExit\r\n                >\r\n                  <Tooltip\r\n                    title={\r\n                      <span\r\n                        style={{ fontSize: \"14px\", padding: \"8px 5px 8px 5px\" }}\r\n                      >\r\n                        {attachFileList.title}\r\n                      </span>\r\n                    }\r\n                    placement=\"left\"\r\n                  >\r\n                    <Fab color=\"primary\" aria-label=\"person\">\r\n                      <div className=\"chat__icon\">\r\n                        <label htmlFor=\"file-input\">\r\n                          {attachFileList.icon}\r\n                        </label>\r\n                        <input\r\n                          id=\"file-input\"\r\n                          type=\"file\"\r\n                          onChange={onFileChange}\r\n                          accept=\"image/*,video/mp4,video/3gpp,video/quicktime\"\r\n                        />\r\n                      </div>\r\n                    </Fab>\r\n                  </Tooltip>\r\n                </Slide>\r\n              ))}\r\n            </div>\r\n          </ClickAwayListener>\r\n        ) : null}\r\n      </div>\r\n\r\n      <form>\r\n        {/* <input\r\n          required\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message\"\r\n          type=\"text\"\r\n          // minLength=\"1\"\r\n          // maxLength=\"700\"\r\n        /> */}\r\n        <textarea\r\n          required\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message\"\r\n          type=\"text\"\r\n          rows=\"1\"\r\n          onKeyDown={onEnterPress}\r\n          // cols=\"50\"\r\n          // minLength=\"1\"\r\n          // maxLength=\"700\"\r\n        />\r\n\r\n        {/* <TextField\r\n          id=\"filled-full-width\"\r\n          fullWidth\r\n          multiline\r\n          rowsMax={4}\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n        /> */}\r\n\r\n        {/* <button onClick={sendMessage} type=\"submit\">\r\n          Send a message\r\n        </button> */}\r\n      </form>\r\n\r\n      <TooltipCustom\r\n        name=\"Voice Message\"\r\n        icon={<MicIcon />}\r\n        onClick={() => voiceMessage()}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatFooter;\r\n"]},"metadata":{},"sourceType":"module"}