{"ast":null,"code":"var _jsxFileName = \"E:\\\\React_Project\\\\WhatsApp-Clone-React-isnotuploaded on github\\\\src\\\\Sidebar\\\\Sidebar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useStateValue } from \"../StateProvider\"; //importing firebase\n// import db from \"../firebase\";\n// import { auth, storage, firebase } from \"../firebase\";\n//importing components\n\nimport UserAvatar from \"./UserAvatar\";\nimport NewChat from \"./NewChat\";\nimport Status from \"./Status\";\nimport DropdownMenu from \"../shared/DropdownMenu\";\nimport DrawerLeft from \"./DrawerLeft\";\nimport SearchBar from \"../shared/SearchBar\";\nimport SidebarChat from \"./SidebarChat\";\nimport { toastInfo } from \"../shared/toastInfo\";\nimport TooltipCustom from \"../shared/TooltipCustom\"; //importing material-ui\n\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\"; //importing styles\n\nimport \"./Sidebar.css\";\n\nfunction Sidebar({\n  rooms,\n  setIsRoomExist,\n  isRoomExist\n}) {\n  _s();\n\n  const history = useHistory();\n  const {\n    roomId\n  } = useParams();\n  const [{\n    user\n  }] = useStateValue();\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [noRooms, setNoRooms] = useState(false);\n  const [drawerLeft, setDrawerLeft] = useState(false);\n  const [menuSidebar, setMenuSidebar] = useState(null);\n  const [isSearchFound, setIsSetSearchFound] = useState(false);\n\n  const findRoom = function (myRooms) {\n    return function (x) {\n      var searchRoom = x.data.name + \"\";\n      return searchRoom.toLowerCase().includes(myRooms.toLowerCase()) || !myRooms;\n    };\n  };\n\n  useEffect(() => {\n    const roomResult = () => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, rooms.filter(findRoom(search)).map(room => /*#__PURE__*/React.createElement(\"p\", {\n        key: room.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }\n      }, room.name)));\n    };\n\n    if (search) {\n      var result = roomResult(); // console.log(\"result\", result)\n\n      if (result.props.children.length > 0) {\n        setIsSetSearchFound(true); // console.log(\"search sucess\");\n      } else {\n        setIsSetSearchFound(false); // console.log(\"search fail\");\n      }\n    } //checks if room exists, else will be redirect to landing screen\n\n\n    var roomList = rooms;\n\n    if (roomList) {\n      //checks if the current route(roomId) exists in roomList(array)\n      const index = roomList.findIndex(function (id, index) {\n        return id.id === roomId;\n      });\n\n      if (index >= 0) {\n        setIsRoomExist(index); // console.log(\"ROOM EXISTS\");\n      } else if (index === -1) {\n        setIsRoomExist(index);\n        history.push(\"/\"); // console.log(\"ROOM DOES NOT EXIST\");\n      }\n    }\n  }, [search, rooms, roomId, history, setIsRoomExist]);\n  useEffect(() => {\n    if (rooms) {\n      if (rooms.length > 0) {\n        setNoRooms(false);\n        setLoading(true);\n      } else if (rooms.length === 0 && isRoomExist === -1) {\n        setNoRooms(true);\n        setLoading(true);\n      }\n    }\n  }, [rooms]); // console.log(\"ROOMS> >\", noRooms);\n  // console.log(\"ROOMS EXIST> >\", isRoomExist);\n\n  const handleDrawerLeftOpen = () => {\n    setMenuSidebar(null);\n    setDrawerLeft(true);\n  };\n\n  const handleMenuOpen = event => {\n    setMenuSidebar(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setMenuSidebar(null);\n  };\n\n  const archive = () => {\n    const archive = \"archive\";\n    toastInfo(\"Archive is not yet available!\", archive, \"top-center\");\n  };\n\n  const starred = () => {\n    const starred = \"starred\";\n    toastInfo(\"Starred is not yet available!\", starred, \"top-center\");\n  };\n\n  const settings = () => {\n    const settings = \"settings\";\n    toastInfo(\"Settings is not yet available!\", settings, \"top-center\");\n  };\n\n  const logout = () => {\n    if (user.isAnonymous === true) {\n      auth.currentUser.delete().then(function () {\n        history.push(\"/\");\n      }).catch(function (error) {\n        // An error happened.\n        console.log(\"error deleting anonymous user\", error);\n      });\n    } else {\n      auth.signOut();\n    }\n  };\n\n  const menuLists = [{\n    title: \"Profile\",\n    onClick: () => handleDrawerLeftOpen(),\n    id: Math.random() * 100000\n  }, {\n    title: \"Archived\",\n    onClick: () => archive(),\n    id: Math.random() * 100000\n  }, {\n    title: \"Starred\",\n    onClick: () => starred(),\n    id: Math.random() * 100000\n  }, {\n    title: \"Settings\",\n    onClick: () => settings(),\n    id: Math.random() * 100000\n  }, {\n    title: \"Logout\",\n    onClick: () => logout(),\n    id: Math.random() * 100000\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    id: \"UserProfile\",\n    photoURL: user.photoURL,\n    onClick: () => handleDrawerLeftOpen(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(DrawerLeft, {\n    drawerLeft: drawerLeft,\n    setDrawerLeft: setDrawerLeft,\n    db: db,\n    auth: auth,\n    storage: storage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__headerRight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Status, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(NewChat, {\n    db: db,\n    user: user,\n    firebase: firebase,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(TooltipCustom, {\n    name: \"Menu\",\n    icon: /*#__PURE__*/React.createElement(MoreVertIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }),\n    onClick: handleMenuOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(DropdownMenu, {\n    menuLists: menuLists,\n    menu: menuSidebar,\n    handleMenuOpen: handleMenuOpen,\n    handleMenuClose: handleMenuClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(SearchBar, {\n    search: search,\n    setSearch: setSearch,\n    placeholder: \"Search or start new chat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__chats\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, search ? /*#__PURE__*/React.createElement(React.Fragment, null, isSearchFound ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }, rooms.filter(findRoom(search)).map(room => /*#__PURE__*/React.createElement(SidebarChat, {\n    key: room.id,\n    id: room.id,\n    name: room.data.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 23\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__chatsContainer_empty\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 21\n    }\n  }, \"No chat room found\"))) : /*#__PURE__*/React.createElement(React.Fragment, null, rooms.map(room => /*#__PURE__*/React.createElement(SidebarChat, {\n    key: room.id,\n    id: room.id,\n    name: room.data.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 19\n    }\n  })))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__chatsContainer_loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 15\n    }\n  }))), noRooms && loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__chatsContainer_empty\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 13\n    }\n  }, \"No chats\")) : null));\n}\n\n_s(Sidebar, \"te63ZRXimBrZyBr/C2MfPU1pva4=\", false, function () {\n  return [useHistory, useParams, useStateValue];\n});\n\n_c = Sidebar;\nexport default Sidebar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sidebar\");","map":{"version":3,"sources":["E:/React_Project/WhatsApp-Clone-React-isnotuploaded on github/src/Sidebar/Sidebar.js"],"names":["React","useState","useEffect","useHistory","useParams","useStateValue","UserAvatar","NewChat","Status","DropdownMenu","DrawerLeft","SearchBar","SidebarChat","toastInfo","TooltipCustom","CircularProgress","MoreVertIcon","Sidebar","rooms","setIsRoomExist","isRoomExist","history","roomId","user","search","setSearch","loading","setLoading","noRooms","setNoRooms","drawerLeft","setDrawerLeft","menuSidebar","setMenuSidebar","isSearchFound","setIsSetSearchFound","findRoom","myRooms","x","searchRoom","data","name","toLowerCase","includes","roomResult","filter","map","room","id","result","props","children","length","roomList","index","findIndex","push","handleDrawerLeftOpen","handleMenuOpen","event","currentTarget","handleMenuClose","archive","starred","settings","logout","isAnonymous","auth","currentUser","delete","then","catch","error","console","log","signOut","menuLists","title","onClick","Math","random","photoURL","db","storage","firebase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n\r\n//importing firebase\r\n// import db from \"../firebase\";\r\n// import { auth, storage, firebase } from \"../firebase\";\r\n\r\n//importing components\r\nimport UserAvatar from \"./UserAvatar\";\r\nimport NewChat from \"./NewChat\";\r\nimport Status from \"./Status\";\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport DrawerLeft from \"./DrawerLeft\";\r\nimport SearchBar from \"../shared/SearchBar\";\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\n//importing material-ui\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n//importing styles\r\nimport \"./Sidebar.css\";\r\n\r\nfunction Sidebar({ rooms, setIsRoomExist, isRoomExist }) {\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  const [{ user }] = useStateValue();\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [noRooms, setNoRooms] = useState(false);\r\n  const [drawerLeft, setDrawerLeft] = useState(false);\r\n  const [menuSidebar, setMenuSidebar] = useState(null);\r\n  const [isSearchFound, setIsSetSearchFound] = useState(false);\r\n\r\n  const findRoom = function (myRooms) {\r\n    return function (x) {\r\n      var searchRoom = x.data.name + \"\";\r\n      return (\r\n        searchRoom.toLowerCase().includes(myRooms.toLowerCase()) || !myRooms\r\n      );\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    const roomResult = () => {\r\n      return (\r\n        <>\r\n          {rooms.filter(findRoom(search)).map((room) => (\r\n            <p key={room.id}>{room.name}</p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = roomResult();\r\n      // console.log(\"result\", result)\r\n      if (result.props.children.length > 0) {\r\n        setIsSetSearchFound(true);\r\n        // console.log(\"search sucess\");\r\n      } else {\r\n        setIsSetSearchFound(false);\r\n        // console.log(\"search fail\");\r\n      }\r\n    }\r\n\r\n    //checks if room exists, else will be redirect to landing screen\r\n    var roomList = rooms;\r\n    if (roomList) {\r\n      //checks if the current route(roomId) exists in roomList(array)\r\n      const index = roomList.findIndex(function (id, index) {\r\n        return id.id === roomId;\r\n      });\r\n\r\n      if (index >= 0) {\r\n        setIsRoomExist(index);\r\n        // console.log(\"ROOM EXISTS\");\r\n      } else if (index === -1) {\r\n        setIsRoomExist(index);\r\n        history.push(\"/\");\r\n        // console.log(\"ROOM DOES NOT EXIST\");\r\n      }\r\n    }\r\n  }, [search, rooms, roomId, history, setIsRoomExist]);\r\n\r\n  useEffect(() => {\r\n    if (rooms) {\r\n      if (rooms.length > 0) {\r\n        setNoRooms(false);\r\n        setLoading(true);\r\n      } else if (rooms.length === 0 && isRoomExist === -1) {\r\n        setNoRooms(true);\r\n        setLoading(true);\r\n      }\r\n    }\r\n  }, [rooms]);\r\n\r\n  // console.log(\"ROOMS> >\", noRooms);\r\n  // console.log(\"ROOMS EXIST> >\", isRoomExist);\r\n\r\n  const handleDrawerLeftOpen = () => {\r\n    setMenuSidebar(null);\r\n    setDrawerLeft(true);\r\n  };\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setMenuSidebar(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuSidebar(null);\r\n  };\r\n\r\n  const archive = () => {\r\n    const archive = \"archive\";\r\n    toastInfo(\"Archive is not yet available!\", archive, \"top-center\");\r\n  };\r\n\r\n  const starred = () => {\r\n    const starred = \"starred\";\r\n    toastInfo(\"Starred is not yet available!\", starred, \"top-center\");\r\n  };\r\n\r\n  const settings = () => {\r\n    const settings = \"settings\";\r\n    toastInfo(\"Settings is not yet available!\", settings, \"top-center\");\r\n  };\r\n\r\n  const logout = () => {\r\n    if (user.isAnonymous === true) {\r\n      auth.currentUser\r\n        .delete()\r\n        .then(function () {\r\n          history.push(\"/\");\r\n        })\r\n        .catch(function (error) {\r\n          // An error happened.\r\n          console.log(\"error deleting anonymous user\", error);\r\n        });\r\n    } else {\r\n      auth.signOut();\r\n    }\r\n  };\r\n\r\n  const menuLists = [\r\n    {\r\n      title: \"Profile\",\r\n      onClick: () => handleDrawerLeftOpen(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Archived\",\r\n      onClick: () => archive(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Starred\",\r\n      onClick: () => starred(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Settings\",\r\n      onClick: () => settings(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Logout\",\r\n      onClick: () => logout(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__header\">\r\n        <UserAvatar\r\n          id=\"UserProfile\"\r\n          photoURL={user.photoURL}\r\n          onClick={() => handleDrawerLeftOpen()}\r\n        />\r\n        <DrawerLeft\r\n          drawerLeft={drawerLeft}\r\n          setDrawerLeft={setDrawerLeft}\r\n          db={db}\r\n          auth={auth}\r\n          storage={storage}\r\n        />\r\n\r\n        <div className=\"sidebar__headerRight\">\r\n          <Status />\r\n          <NewChat db={db} user={user} firebase={firebase} />\r\n          <TooltipCustom\r\n            name=\"Menu\"\r\n            icon={<MoreVertIcon />}\r\n            onClick={handleMenuOpen}\r\n          />\r\n          <DropdownMenu\r\n            menuLists={menuLists}\r\n            menu={menuSidebar}\r\n            handleMenuOpen={handleMenuOpen}\r\n            handleMenuClose={handleMenuClose}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <SearchBar\r\n        search={search}\r\n        setSearch={setSearch}\r\n        placeholder=\"Search or start new chat\"\r\n      />\r\n\r\n      <div className=\"sidebar__chats\">\r\n        {loading ? (\r\n          <>\r\n            {search ? (\r\n              <>\r\n                {isSearchFound ? (\r\n                  <div>\r\n                    {rooms.filter(findRoom(search)).map((room) => (\r\n                      <SidebarChat\r\n                        key={room.id}\r\n                        id={room.id}\r\n                        name={room.data.name}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"sidebar__chatsContainer_empty\">\r\n                    <span>No chat room found</span>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <>\r\n                {rooms.map((room) => (\r\n                  <SidebarChat\r\n                    key={room.id}\r\n                    id={room.id}\r\n                    name={room.data.name}\r\n                  />\r\n                ))}\r\n              </>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"sidebar__chatsContainer_loading\">\r\n            <div>\r\n              <CircularProgress />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {noRooms && loading ? (\r\n          <div className=\"sidebar__chatsContainer_empty\">\r\n            <span>No chats</span>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n"]},"metadata":{},"sourceType":"module"}